@page
@model Amphora.Api.Areas.Amphorae.Pages.IndexModel
@{
    ViewData["Title"] = "Amphorae";
}

<div id="main" class="container">
    <div class="row main-header">
        <div class="col">
            <span>
                <h1 class="display-4">Amphoræ</h1>
                <a asp-page="./Create"><button class="btn btn-primary">Create</button></a>
            </span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <div class="card mb-3">
                <div class="card-header">
                    <h5 class="card-title">View Options</h5>
                </div>
                <div class="card-body">
                    @{
                        var thisUrl = Url.Content("~");
                        var mineUrl = $"{thisUrl}?viewType=mine";
                        var orgUrl = $"{thisUrl}?viewType=org";
                        var purchasedUrl = $"{thisUrl}?viewType=purchased";
                        string mine = string.Empty;
                        string org = string.Empty;
                        string pur = string.Empty;
                        if (string.Equals(Model.ViewType, "mine" )) {mine = "active";}
                        if( string.Equals(Model.ViewType, "org" )) {org = "active";}
                        if( string.Equals(Model.ViewType, "purchased" )){ pur = "active";}
                    }
                    <a href="@mineUrl">
                        <button type="button" class="m-1 btn btn-light btn-block @mine">Mine</button>
                    </a>                              
                    <a href="@orgUrl">
                        <button type="button" class="m-1 btn btn-light btn-block @org">My Org</button>
                    </a>
                    <a href="@purchasedUrl">
                        <button type="button" class="m-1 btn btn-light btn-block @pur">Purchased</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="col">
            <table id="entity-table" class="table table-borderless table-striped">
                <thead>
                    <tr class="row">
                        <th class="col-2"></th>
                        <th class="col-6">Name</th>
                        <th class="d-none d-sm-block col-sm-2 text-right">Price ($)</th>
                        <th class="col-sm-2"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var entity in Model.Amphorae)
                    {
                     <tr class="row align-items-center entity-item">
                        <th class="col-2">
                            <img class="img-fluid img-bullet" src="~/images/Amphora_Black.svg">
                        </th>
                        <td class="col-6">
                            @entity.Name 
                        </td>
                        <td class="d-none d-sm-block col-sm-2 text-right">
                             @entity.Price 
                        </td>
                        <td class="col-sm-2">
                            <a asp-page="./Detail" asp-route-id="@entity.Id"> 
                                <button class="btn btn-link text-success"><i class="fas fa-info-circle"></i></button> 
                            </a>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

